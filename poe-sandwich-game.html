<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>PWNadelphia – Poe's Hoagie Stand</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Use your existing site CSS -->
  <link rel="stylesheet" href="style.css">
  <style>
    /* Small, page-local styles for the sandwich game */

    .game-wrapper {
      max-width: 720px;
      margin: 0 auto;
    }

    .game-order {
      padding: 1rem 1.25rem;
      border-radius: 0.75rem;
      background: rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(255, 255, 255, 0.06);
      margin-bottom: 1rem;
    }

    .game-order h3 {
      margin: 0 0 0.4rem;
      font-size: 1.05rem;
    }

    .game-order p {
      margin: 0.1rem 0;
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .ingredients-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
      gap: 0.6rem;
      margin: 1rem 0 1.2rem;
    }

    .ingredient-btn {
      font-size: 0.85rem;
      padding: 0.55rem 0.4rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(0, 0, 0, 0.35);
      color: #f5f3ff;
      cursor: pointer;
      transition:
        background 120ms ease-out,
        border-color 120ms ease-out,
        transform 80ms ease-out,
        box-shadow 120ms ease-out;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .ingredient-btn.selected {
      border-color: #df6dff;
      background: rgba(179, 71, 255, 0.3);
      box-shadow: 0 0 10px rgba(179, 71, 255, 0.7);
      transform: translateY(-1px);
    }

    .game-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      align-items: center;
      margin-bottom: 1rem;
    }

    .btn-small {
      font-size: 0.8rem;
      padding: 0.35rem 0.9rem;
      border-radius: 999px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      border: 1px solid rgba(179, 71, 255, 0.7);
      background: rgba(179, 71, 255, 0.1);
      color: #f5f3ff;
      cursor: pointer;
      transition:
        background 120ms ease-out,
        box-shadow 120ms ease-out,
        transform 80ms ease-out,
        border-color 120ms ease-out;
    }

    .btn-small:hover {
      background: rgba(179, 71, 255, 0.25);
      border-color: #df6dff;
      box-shadow: 0 0 12px rgba(179, 71, 255, 0.8);
      transform: translateY(-1px);
    }

    .game-result {
      min-height: 3.2rem;
      padding: 0.75rem 1rem;
      border-radius: 0.75rem;
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.08);
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .game-result strong {
      display: block;
      margin-bottom: 0.15rem;
    }

    .game-score {
      font-size: 0.85rem;
      opacity: 0.85;
      margin-top: 0.25rem;
    }

    .game-note {
      font-size: 0.8rem;
      opacity: 0.75;
      margin-top: 0.6rem;
    }
  </style>
</head>
<body>
  <!-- Header reused from your site style -->
  <header class="site-header">
    <div class="container">
      <h1 class="logo"><a href="index.html#top">PWNadelphia</a></h1>
      <nav class="site-nav">
        <a href="index.html#zones">City Map</a>
        <a href="index.html#about">About</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- Hero-style intro for the game -->
    <section class="hero">
      <div class="container">
        <h2 class="hero-title">Poe's Hoagie Stand</h2>
        <p class="hero-subtitle">
          Build the perfect sandwich order before the city talks trash.
        </p>
        <a href="index.html#zones" class="btn ghost">← Back to PWNadelphia</a>
      </div>
    </section>

    <!-- Game panel -->
    <section class="panel">
      <div class="game-wrapper">
        <h2 class="panel-title">Make Poe's Sandwich</h2>
        <p class="panel-text">
          A customer steps up to the stand and rattles off a hoagie order. Your job:
          pick the right ingredients. Too many extras or missing the important stuff,
          and Poe's not impressed.
        </p>

        <!-- Current order -->
        <div class="game-order" id="game-order">
          <h3>Current Order</h3>
          <p><strong>Name:</strong> <span id="order-name"></span></p>
          <p><strong>Description:</strong> <span id="order-description"></span></p>
          <p><strong>Notes:</strong> <span id="order-notes"></span></p>
        </div>

        <!-- Ingredients selection -->
        <h3 class="panel-title" style="font-size:1rem;margin-top:1.1rem;">Choose Ingredients</h3>
        <p class="panel-text" style="font-size:0.85rem;">
          Tap ingredients to add or remove them from the sandwich.
        </p>

        <div class="ingredients-grid" id="ingredients-grid">
          <!-- Buttons generated by JavaScript -->
        </div>

        <!-- Actions -->
        <div class="game-actions">
          <button type="button" class="btn-small" id="btn-check">
            Serve Sandwich
          </button>
          <button type="button" class="btn-small" id="btn-new">
            New Order
          </button>
          <button type="button" class="btn-small" id="btn-clear">
            Clear Ingredients
          </button>
        </div>

        <!-- Result -->
        <div class="game-result" id="game-result">
          <strong>Waiting for your first sandwich...</strong>
          <span class="game-score">Score: —</span>
          <p class="game-note">
            Hint: some orders don’t want certain ingredients at all. Read the notes.
          </p>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p class="panel-text">Poe's Hoagie Stand – Training ground for future legends.</p>
    </div>
  </footer>

  <script>
    // All possible ingredients in the game
    const ALL_INGREDIENTS = [
      "Seeded Roll",
      "Plain Roll",
      "Turkey",
      "Ham",
      "Genoa Salami",
      "Capicola",
      "Provolone",
      "American Cheese",
      "Lettuce",
      "Tomato",
      "Onion",
      "Hot Peppers",
      "Sweet Peppers",
      "Pickles",
      "Oil & Vinegar",
      "Mayo",
      "Mustard",
      "Salt & Oregano"
    ];

    // Pre-defined sandwich orders
    const ORDERS = [
      {
        id: "south-philly-italian",
        name: "South Philly Italian",
        description: "Seeded roll with Italian meats, prov, and the classic hoagie salad.",
        required: ["Seeded Roll", "Genoa Salami", "Capicola", "Provolone", "Lettuce", "Tomato", "Onion", "Oil & Vinegar"],
        forbidden: ["Mayo"],
        notes: "NO mayo. If you put mayo on this, you’re getting roasted."
      },
      {
        id: "activist-veggie",
        name: "Poe's Protest Veggie",
        description: "Loud on flavor, quiet on meat.",
        required: ["Seeded Roll", "Lettuce", "Tomato", "Onion", "Hot Peppers", "Oil & Vinegar"],
        forbidden: ["Turkey", "Ham", "Genoa Salami", "Capicola"],
        notes: "Veggie only. Add heat and tang, skip all the meat."
      },
      {
        id: "corner-deli-turkey",
        name: "Corner Deli Turkey",
        description: "Simple turkey hoagie with just enough crunch.",
        required: ["Plain Roll", "Turkey", "Lettuce", "Tomato", "Mayo"],
        forbidden: [],
        notes: "You can add onions or pickles for bonus flavor, but don’t forget the basics."
      },
      {
        id: "late-night-mix",
        name: "Late-Night Mix",
        description: "Whatever's left in the case, somehow still hits.",
        required: ["Plain Roll", "Turkey", "Ham", "American Cheese", "Lettuce", "Tomato"],
        forbidden: [],
        notes: "Anything else is optional, but this core has to be there."
      }
    ];

    let currentOrder = null;
    let selectedIngredients = new Set();

    const orderNameEl = document.getElementById("order-name");
    const orderDescriptionEl = document.getElementById("order-description");
    const orderNotesEl = document.getElementById("order-notes");
    const ingredientsGridEl = document.getElementById("ingredients-grid");
    const resultEl = document.getElementById("game-result");
    const btnCheck = document.getElementById("btn-check");
    const btnNew = document.getElementById("btn-new");
    const btnClear = document.getElementById("btn-clear");

    // Initialize ingredient buttons
    function renderIngredientButtons() {
      ingredientsGridEl.innerHTML = "";
      ALL_INGREDIENTS.forEach(name => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.textContent = name;
        btn.className = "ingredient-btn";
        btn.addEventListener("click", () => toggleIngredient(name, btn));
        ingredientsGridEl.appendChild(btn);
      });
    }

    function toggleIngredient(name, btn) {
      if (selectedIngredients.has(name)) {
        selectedIngredients.delete(name);
        btn.classList.remove("selected");
      } else {
        selectedIngredients.add(name);
        btn.classList.add("selected");
      }
    }

    function clearSelection() {
      selectedIngredients.clear();
      const buttons = ingredientsGridEl.querySelectorAll(".ingredient-btn");
      buttons.forEach(btn => btn.classList.remove("selected"));
    }

    function pickRandomOrder() {
      const idx = Math.floor(Math.random() * ORDERS.length);
      currentOrder = ORDERS[idx];
      updateOrderDisplay();
      clearSelection();
      resultEl.innerHTML =
        "<strong>New order up. Build it right.</strong>" +
        '<div class="game-score">Score: —</div>' +
        '<p class="game-note">When you think it\'s ready, hit "Serve Sandwich".</p>';
    }

    function updateOrderDisplay() {
      if (!currentOrder) return;
      orderNameEl.textContent = currentOrder.name;
      orderDescriptionEl.textContent = currentOrder.description;
      orderNotesEl.textContent = currentOrder.notes;
    }

    function scoreSandwich() {
      if (!currentOrder) {
        resultEl.innerHTML =
          "<strong>No order yet.</strong>" +
          '<div class="game-score">Hit "New Order" to start.</div>';
        return;
      }

      const required = currentOrder.required;
      const forbidden = currentOrder.forbidden || [];

      const missing = required.filter(item => !selectedIngredients.has(item));
      const extraForbidden = Array.from(selectedIngredients).filter(item =>
        forbidden.includes(item)
      );

      // Score calculation
      let score = 100;
      score -= missing.length * 20;
      score -= extraForbidden.length * 25;
      if (score < 0) score = 0;

      let message = "";

      if (score === 100) {
        message = "Poe takes a bite, nods, and doesn’t have a single note. Perfect hoagie.";
      } else if (score >= 70) {
        message = "Close. Poe likes it, but he’s side-eyeing a couple of your choices.";
      } else if (score >= 40) {
        message = "Edible, but you’d get clowned at the stand. Read the order notes closer.";
      } else {
        message = "Yeah, nah. Poe’s taking that apart live on the timeline. Try again.";
      }

      // Build feedback detail
      let detail = "";
      if (missing.length) {
        detail += "<br><strong>Missing:</strong> " + missing.join(", ");
      }
      if (extraForbidden.length) {
        detail += "<br><strong>Should not be on this hoagie:</strong> " + extraForbidden.join(", ");
      }

      resultEl.innerHTML =
        "<strong>" + message + "</strong>" +
        '<div class="game-score">Score: ' + score + "/100</div>" +
        (detail ? "<p>" + detail + "</p>" : "") +
        '<p class="game-note">Tip: you can always hit "New Order" for a different sandwich.</p>';
    }

    // Event listeners
    btnCheck.addEventListener("click", scoreSandwich);
    btnNew.addEventListener("click", pickRandomOrder);
    btnClear.addEventListener("click", clearSelection);

    // Initial render
    renderIngredientButtons();
    pickRandomOrder();
  </script>
</body>
</html>